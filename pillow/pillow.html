<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pillow API 文档</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        h1, h2, h3, h4 { color: #333; }
        p, ul, pre { margin: 10px 0; }
        code { background-color: #f4f4f4; padding: 2px 4px; border-radius: 3px; }
        .container { max-width: 800px; margin: auto; }
        .code-block { background-color: #f9f9f9; border-left: 4px solid #007bff; padding: 10px 15px; margin: 10px 0; }
        .title { font-weight: bold; margin-bottom: 5px; }
        ul { padding-left: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pillow API: 图像处理</h1>
        <p>使用 Python 的 <a href="https://pillow.readthedocs.io/" target="_blank" rel="noopener noreferrer">Pillow</a> (PIL Fork) 库进行多种图像处理操作。</p>

        <h2>1. 处理图像</h2>
        <p><strong>端点:</strong> <code>POST /process-image</code></p>
        <p>接收图像文件和一系列处理操作指令，返回处理后的图像。</p>
        <p><strong>请求体 (FormData):</strong></p>
        <p>此端点接受 <code>multipart/form-data</code> 格式的请求，包含以下字段:</p>
        <ul>
          <li><code>file</code>: (File) 必需，要处理的图像文件。</li>
          <li><code>operations</code>: (String[]) 必需，操作指令数组。每个操作是一个字符串，例如：
            <ul>
                <li><code>"resize:width,height"</code> (例如, "resize:200,200")</li>
                <li><code>"rotate:angle"</code> (例如, "rotate:90")</li>
                <li><code>"grayscale"</code> (无参数)</li>
                <li><code>"blur:radius"</code> (例如, "blur:2")</li>
                <li><code>"crop:x,y,width,height"</code> (例如, "crop:50,50,100,100")</li>
            </ul>
            可以多次出现此字段以执行多个操作。
          </li>
          <li><code>output_format</code>: (String) 必需，输出图像格式，例如："PNG", "JPEG", "GIF", "BMP", "TIFF", "WEBP"。</li>
        </ul>
        <p><strong>响应 (Image):</strong></p>
        <p>成功时，直接返回处理后的图像文件。响应头中会包含 <code>Content-Disposition</code> 指示文件名，以及 <code>Content-Type</code> 表明图像类型。</p>
        <p>如果发生错误，响应将是 JSON 格式：</p>
        <div class="code-block">
            <div class="title">JSON</div>
            <pre><code>{
  "error": "错误信息描述"
}</code></pre>
        </div>
        <p><a href="https://pillow.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">了解更多关于 Pillow</a></p>
    </div>
</body>
</html>
