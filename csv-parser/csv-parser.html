<h3>CSV Parser API: CSV 与 JSON 转换</h3>
<p>提供 CSV 数据与 JSON 格式之间的转换功能，支持自定义解析选项。</p>

<h4>1. CSV 转 JSON</h4>
<p><strong>端点:</strong> <code>POST /csv-parser/parse</code> (或 <code>POST /csv-parser/csv-to-json</code> 向后兼容)</p>
<p>将 CSV 数据转换为 JSON 对象数组。</p>

<p><strong>请求体 (JSON):</strong></p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "csv_data": "header1,header2\\nvalue1,value2\\nvalue3,value4",
  "options": {
    "separator": ",",
    "skipEmptyLines": true,
    "headers": true
  }
}</code></pre>
</div>

<p><strong>可用选项 (options):</strong></p>
<ul>
    <li><code>separator</code> - 分隔符，默认为逗号 ","</li>
    <li><code>skipEmptyLines</code> - 跳过空行，默认为 true</li>
    <li><code>headers</code> - 是否使用第一行作为标题，默认为 true</li>
</ul>

<p><strong>响应 (JSON):</strong></p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "success": true,
  "data": [
    { "header1": "value1", "header2": "value2" },
    { "header1": "value3", "header2": "value4" }
  ],
  "count": 2,
  "options_used": {
    "separator": ",",
    "skipEmptyLines": true,
    "headers": true
  }
}</code></pre>
</div>

<p><strong>示例用法 (JavaScript):</strong></p>
<div class="code-block">
    <div class="title">JavaScript</div>
    <pre><code>fetch('http://localhost:3007/csv-parser/parse', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify({
        csv_data: "name,age,city\\njohn,30,Beijing\\njane,25,Shanghai",
        options: {
            separator: ",",
            skipEmptyLines: true
        }
    }),
})
.then(response => response.json())
.then(data => {
    if (data.success) {
        console.log('解析成功:', data.data);
        console.log('记录数量:', data.count);
    } else {
        console.error('解析失败:', data.error);
    }
})
.catch(error => console.error('请求错误:', error));</code></pre>
</div>

<h4>2. 健康检查</h4>
<p><strong>端点:</strong> <code>GET /csv-parser/health</code></p>
<p>检查 API 服务状态。</p>

<p><strong>响应 (JSON):</strong></p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "status": "healthy",
  "service": "CSV Parser API",
  "version": "1.0.0",
  "timestamp": "2024-01-01T12:00:00.000Z"
}</code></pre>
</div>

<h4>3. API 信息</h4>
<p><strong>端点:</strong> <code>GET /csv-parser/info</code></p>
<p>获取 API 的详细信息和所有可用端点。</p>

<p><strong>响应 (JSON):</strong></p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "name": "CSV Parser API",
  "version": "1.0.0",
  "description": "API for parsing CSV data to JSON format",
  "endpoints": {
    "POST /csv-parser/parse": "Parse CSV data to JSON",
    "POST /csv-parser/csv-to-json": "Parse CSV data to JSON (legacy endpoint)",
    "GET /csv-parser/health": "Health check",
    "GET /csv-parser/info": "API information"
  }
}</code></pre>
</div>

<h4>错误处理</h4>
<p>如果请求失败，API 将返回错误信息：</p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "success": false,
  "error": "Error parsing CSV",
  "details": "具体错误信息",
  "code": "PARSE_ERROR"
}</code></pre>
</div>

<p><strong>常见错误代码:</strong></p>
<ul>
    <li><code>PARSE_ERROR</code> - CSV 解析错误</li>
    <li><code>MISSING_DATA</code> - 缺少 csv_data 参数</li>
</ul>
