<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESLint API 文档</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 20px; background-color: #f9f9f9; color: #333; }
        h1, h3, h4 { color: #4A90E2; }
        h1 { text-align: center; margin-bottom: 20px; }
        h3 { margin-top: 30px; margin-bottom: 10px; }
        h4 { margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 15px; }
        .code-block {
            background-color: #2d2d2d;
            color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        .title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #5cb85c;
        }
        a {
            color: #4A90E2;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ESLint API 文档</h1>

        <h3>ESLint API: JavaScript/TypeScript 代码检查与修复</h3>
        <p>使用 <a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">ESLint</a> 对 JavaScript 或 TypeScript 代码进行静态分析，查找问题并可选择自动修复。</p>

        <h4>1. 检查 (Lint) 与修复代码</h4>
        <p><strong>端点:</strong> <code>POST /lint</code></p>
        <p>接收代码字符串、语言类型以及是否尝试修复的选项，返回 ESLint 的分析结果和修复后的代码（如果适用）。</p>
        <p><strong>请求体 (JSON):</strong></p>
        <div class="code-block">
            <div class="title">JSON</div>
            <pre><code>{
  "code": "const foo = 'bar' ; console.log(foo)",
  "language": "javascript", <span class="comment">// "javascript" 或 "typescript"</span>
  "fix": true <span class="comment">// 可选，布尔值，是否尝试自动修复问题，默认为 false</span>
}</code></pre>
        </div>
        <p><strong>响应 (JSON):</strong></p>
        <div class="code-block">
            <div class="title">JSON</div>
            <pre><code>{
  "results": [
    {
      "filePath": "&lt;text&gt;",
      "messages": [
        {
          "ruleId": "semi",
          "severity": 2, <span class="comment">// 2 代表 error, 1 代表 warning</span>
          "message": "Missing semicolon.",
          "line": 1,
          "column": 20,
          "nodeType": "VariableDeclaration",
          "fix": { "range": [19, 19], "text": ";" }
        }
      ],
      "errorCount": 1,
      "warningCount": 0,
      "fixableErrorCount": 1,
      "fixableWarningCount": 0,
      "source": "const foo = 'bar' ; console.log(foo)",
      "output": "const foo = 'bar'; console.log(foo);" <span class="comment">// 如果 fix 为 true 且有可修复问题</span>
    }
  ],
  "fixedCode": "const foo = 'bar'; console.log(foo);", <span class="comment">// 如果 fix 为 true 且代码被修改</span>
  "success": true
}</code></pre>
        </div>
        <p>如果 `fix` 为 `true` 且代码被成功修复，`fixedCode` 字段将包含修复后的代码。`results[0].output` 也可能包含修复后的代码片段。</p>
        <p>如果发生错误（例如，配置问题或内部错误），响应将是：</p>
        <div class="code-block">
            <div class="title">JSON</div>
            <pre><code>{
  "success": false,
  "error": "ESLint 错误信息",
  "details": "可选的错误详情"
}</code></pre>
        </div>
        <p><a href="https://eslint.org/docs/latest/user-guide/getting-started" target="_blank" rel="noopener noreferrer">了解更多关于 ESLint</a></p>
    </div>
</body>
</html>
