<!-- filepath: d:\\1\\fun\\allbeapi\\diff\\diff.html -->
<h3>Diff API: 文本差异比较</h3>
<p>比较两段文本并高亮显示差异。</p>

<h4>1. 计算文本差异</h4>
<p><strong>端点:</strong> <code>POST /diff/compare</code></p>
<p>接收两段文本和差异类型，返回差异结果。</p>
<p><strong>请求体 (JSON):</strong></p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "text1": "This is the first text.",
  "text2": "This is the second text, with changes.",
  "type": "chars" <span class="comment">// 可选，差异类型: "chars", "words", "lines", "json"。默认为 "lines"</span>
}</code></pre>
</div>
<p><strong>响应 (JSON):</strong></p>
<p>响应格式取决于所选的 <code>type</code>。通常是一个包含差异信息的对象数组。</p>
<p>例如，对于 <code>"chars"</code>, <code>"words"</code>, <code>"lines"</code>:</p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "diffs": [
    { "value": "This is the ", "added": false, "removed": false },
    { "value": "first", "added": false, "removed": true },
    { "value": "second", "added": true, "removed": false },
    { "value": " text", "added": false, "removed": false },
    { "value": ", with changes", "added": true, "removed": false },
    { "value": ".", "added": false, "removed": false }
  ]
}</code></pre>
</div>
<p>对于 <code>"json"</code>，响应将是一个描述 JSON 对象差异的结构。</p>

<h4>2. 生成 HTML 格式的差异视图</h4>
<p><strong>端点:</strong> <code>POST /diff/html</code></p>
<p>接收两段文本，生成一个 HTML 字符串，直观地展示文本间的差异。</p>
<p><strong>请求体 (JSON):</strong></p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "text1": "Hello world",
  "text2": "Hello new world!"
}</code></pre>
</div>
<p><strong>响应 (JSON):</strong></p>
<div class="code-block">
    <div class="title">JSON</div>
    <pre><code>{
  "html_diff": "&lt;span style=\"color:grey\"&gt;Hello &lt;/span&gt;&lt;del style=\"background:#ffe6e6\"&gt;&lt;/del&gt;&lt;ins style=\"background:#e6ffe6\"&gt;new &lt;/ins&gt;&lt;span style=\"color:grey\"&gt;world&lt;/span&gt;&lt;del style=\"background:#ffe6e6\"&gt;&lt;/del&gt;&lt;ins style=\"background:#e6ffe6\"&gt;!&lt;/ins&gt;"
}</code></pre>
</div>
<p>此 API 适用于需要文本比较和可视化差异的场景。</p>
